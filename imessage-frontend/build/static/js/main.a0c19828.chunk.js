(this["webpackJsonpimessage-clone"]=this["webpackJsonpimessage-clone"]||[]).push([[0],{65:function(e,a,t){e.exports=t(95)},70:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},91:function(e,a,t){},92:function(e,a,t){},93:function(e,a,t){},94:function(e,a,t){},95:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(22),i=t.n(l),o=(t(70),t(14)),s=(t(75),t(29)),r=Object(s.b)({name:"user",initialState:{user:null},reducers:{login:function(e,a){e.user=a.payload},logout:function(e){e.user=null}}}),m=r.actions,u=m.login,d=m.logout,h=function(e){return e.user.user},p=r.reducer,f=t(24),v=(t(76),t(57)),E=t.n(v),b=t(107),g=t(109),N=(t(77),t(42)),_=t.n(N),j=Object(n.forwardRef)((function(e,a){e.id;var t=e.contents,l=t.timestamp,i=(t.displayName,t.uid,t.photo),s=t.email,r=t.message,m=Object(o.c)(h),u=Object(n.useState)([]),d=Object(f.a)(u,2);d[0],d[1];return c.a.createElement("div",{className:"message ".concat(m.email===s&&"message__sender"),ref:a},c.a.createElement(g.a,{className:"message__photo",src:i}),c.a.createElement("p",null,r),c.a.createElement("small",null,_()(new Date(null===l||void 0===l?void 0:l.toDate())).fromNow()))})),O=t(31),k=t.n(O),y=k.a.initializeApp({apiKey:"AIzaSyBOeHZMY-fXoeHd0YK2_wjZFYG6R0Naq9I",authDomain:"imessage-clone-shoumikh.firebaseapp.com",databaseURL:"https://imessage-clone-shoumikh.firebaseio.com",projectId:"imessage-clone-shoumikh",storageBucket:"imessage-clone-shoumikh.appspot.com",messagingSenderId:"968495468055",appId:"1:968495468055:web:eb8debfa0d17b543f5d652",measurementId:"G-TP5XFZQL59"}).firestore(),S=k.a.auth(),w=new k.a.auth.GoogleAuthProvider,I=y,C=Object(s.b)({name:"chat",initialState:{chatId:null,chatName:null},reducers:{setChat:function(e,a){e.chatId=a.payload.chatId,e.chatName=a.payload.chatName}}}),B=C.actions.setChat,D=function(e){return e.chat.chatId},M=function(e){return e.chat.chatName},A=C.reducer,P=t(55),R=(t(89),t(60)),x=t(56),F=t.n(x);var G=function(){var e=Object(n.useState)(),a=Object(f.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)([]),s=Object(f.a)(i,2),r=s[0],m=s[1],u=Object(o.c)(M),d=Object(o.c)(D),p=Object(o.c)(h),v=Object(n.useState)(!1),g=Object(f.a)(v,2),N=g[0],_=g[1];return Object(n.useEffect)((function(){d&&I.collection("chats").doc(d).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){m(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[d]),c.a.createElement("div",{className:"chat"},c.a.createElement("div",{className:"chat__header"},c.a.createElement("h4",null,"To: ",c.a.createElement("span",{className:"chat__channelName"},u)),c.a.createElement("strong",null,"Details")),c.a.createElement("div",{className:"chat__messages"},c.a.createElement(P.a,{className:"chat__flipMove"},r.map((function(e){var a=e.id,t=e.data;return c.a.createElement(j,{key:a,contents:t})})))),c.a.createElement("div",{className:"chat__input"},c.a.createElement("form",null,c.a.createElement("input",{value:t,onChange:function(e){l(e.target.value)},placeholder:"iMessage",type:"text"}),c.a.createElement("button",{onClick:function(e){var a;e.preventDefault(),I.collection("chats").doc(d).collection("messages").add({timestamp:null===(a=k.a.firestore)||void 0===a?void 0:a.FieldValue.serverTimestamp(),message:t,uid:p.uid,photo:p.photo,displayName:p.displayName,email:p.email}),l("")}},"Send Message")),c.a.createElement(b.a,{onClick:function(){_(!N)}},c.a.createElement(F.a,null)),N?c.a.createElement("span",{className:"chat__inputEmojiPicker"},c.a.createElement(R.a,{onSelect:function(e){var a=e.native;l(t+a)}})):"",c.a.createElement(b.a,null,c.a.createElement(E.a,{className:"chat__mic"}))))},L=(t(91),t(58)),T=t.n(L),W=(t(92),t(59)),Y=t.n(W);t(93);var Z=function(e){var a,t,l,i,s=e.id,r=e.chatName,m=Object(o.b)(),u=Object(n.useState)([]),d=Object(f.a)(u,2),h=d[0],p=d[1],v=Object(o.c)(D);return Object(n.useEffect)((function(){I.collection("chats").doc(s).collection("messages").orderBy("timestamp","desc").onSnapshot((function(e){p(e.docs.map((function(e){return e.data()})))}))}),[s]),c.a.createElement("div",{onClick:function(){m(B({chatId:s,chatName:r}))},className:"sidebarChat ".concat(v===s&&"sidebarChat__active")},c.a.createElement(g.a,{src:null===(a=h[0])||void 0===a?void 0:a.photo}),c.a.createElement("div",{className:"sidebarChat__info"},c.a.createElement("h3",null,r),c.a.createElement("p",null,null===(t=h[0])||void 0===t?void 0:t.message),c.a.createElement("small",null,_()(new Date(null===(l=h[0])||void 0===l||null===(i=l.timestamp)||void 0===i?void 0:i.toDate())).fromNow())))};var z=function(){var e,a=Object(n.useState)(),t=Object(f.a)(a,2),l=t[0],i=t[1],s=Object(o.c)(h),r=Object(n.useState)([]),m=Object(f.a)(r,2),u=m[0],d=m[1];return Object(o.b)(),Object(n.useEffect)((function(){I.collection("chats").onSnapshot((function(e){d(e.docs.map((function(e){return{id:e.id,data:e.data()}})))}))}),[]),c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"sidebar__header"},c.a.createElement(g.a,{onClick:function(){S.signOut()},src:s.photo,className:"sidebar__avatar"}),c.a.createElement("div",{className:"sidebar__input"},c.a.createElement(T.a,null),c.a.createElement("input",{placeholder:"search",type:"text",onChange:function(e){i(e.target.value)}})),c.a.createElement(b.a,{varrient:"outlined",className:"sidebar__inputButton"},c.a.createElement(Y.a,{onClick:function(){var e=prompt("Please Enter chat name");e&&I.collection("chats").add({chatName:e})}}))),c.a.createElement("div",{className:"sidebar__chats"},l===(null===u||void 0===u||null===(e=u.data)||void 0===e?void 0:e.chatName)?u.map((function(e){var a=e.id,t=e.data.chatName;return c.a.createElement(Z,{key:a,id:a,chatName:t})})):u.map((function(e){var a=e.id,t=e.data.chatName;return c.a.createElement(Z,{key:a,id:a,chatName:t})}))))};var H=function(){return c.a.createElement("div",{className:"imessage"},c.a.createElement(z,null),c.a.createElement(G,null))},J=t(108);t(94);var K=function(){return c.a.createElement("div",{className:"login"},c.a.createElement("div",null,c.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/56/IMessage_logo_%28Apple_Inc.%29.png",alt:""}),c.a.createElement("h1",null,"iMessage")),c.a.createElement(J.a,{onClick:function(){S.signInWithPopup(w).catch((function(e){return alert(e.message)}))}},"Sign In"))};var U=function(){var e=Object(o.c)(h),a=Object(o.b)();return Object(n.useEffect)((function(){S.onAuthStateChanged((function(e){a(e?u({uid:e.uid,photo:e.photoURL,email:e.email,displayName:e.displayName}):d())}))}),[]),c.a.createElement("div",{className:"App"},e?c.a.createElement(H,null):c.a.createElement(K,null))},X=Object(s.a)({reducer:{user:p,chat:A}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{store:X},c.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[65,1,2]]]);
//# sourceMappingURL=main.a0c19828.chunk.js.map