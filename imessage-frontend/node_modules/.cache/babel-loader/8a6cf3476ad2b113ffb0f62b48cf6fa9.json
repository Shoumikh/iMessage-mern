{"ast":null,"code":"var _jsxFileName = \"/Users/shoumikh/Documents/React-projects/imessage-clone/src/Message.js\";\nimport { Avatar } from \"@material-ui/core\";\nimport React, { forwardRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"./features/userSlice\";\nimport \"./Message.css\";\nimport moment from \"moment\";\nconst Message = forwardRef(({\n  id,\n  contents: {\n    timestamp,\n    displayName,\n    uid,\n    photo,\n    email,\n    message\n  }\n}, ref) => {\n  const user = useSelector(selectUser);\n  const [messageInfo, serMessageInfo] = useState([]);\n  useEffect(() => {\n    if (chatId) {\n      db.collection(\"chats\").doc(chatId).collection(\"messages\").orderBy(\"timestamp\", \"desc\").onSnapshot(snapshot => {\n        setMessages(snapshot.docs.map(doc => ({\n          id: doc.id,\n          data: doc.data()\n        })));\n      });\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `message ${user.email === email && \"message__sender\"}`,\n    ref: ref,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"message__photo\",\n    src: photo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, message), /*#__PURE__*/React.createElement(\"small\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, moment(new Date(timestamp === null || timestamp === void 0 ? void 0 : timestamp.toDate())).fromNow()));\n});\nexport default Message;","map":{"version":3,"sources":["/Users/shoumikh/Documents/React-projects/imessage-clone/src/Message.js"],"names":["Avatar","React","forwardRef","useState","useSelector","selectUser","moment","Message","id","contents","timestamp","displayName","uid","photo","email","message","ref","user","messageInfo","serMessageInfo","useEffect","chatId","db","collection","doc","orderBy","onSnapshot","snapshot","setMessages","docs","map","data","Date","toDate","fromNow"],"mappings":";AAAA,SAASA,MAAT,QAAuB,mBAAvB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,OAAO,eAAP;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,MAAMC,OAAO,GAAGL,UAAU,CACxB,CACE;AAAEM,EAAAA,EAAF;AAAMC,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,WAAb;AAA0BC,IAAAA,GAA1B;AAA+BC,IAAAA,KAA/B;AAAsCC,IAAAA,KAAtC;AAA6CC,IAAAA;AAA7C;AAAhB,CADF,EAEEC,GAFF,KAGK;AACH,QAAMC,IAAI,GAAGb,WAAW,CAACC,UAAD,CAAxB;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAAgChB,QAAQ,CAAC,EAAD,CAA9C;AAEAiB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIC,MAAJ,EAAY;AACVC,MAAAA,EAAE,CAACC,UAAH,CAAc,OAAd,EACGC,GADH,CACOH,MADP,EAEGE,UAFH,CAEc,UAFd,EAGGE,OAHH,CAGW,WAHX,EAGwB,MAHxB,EAIGC,UAJH,CAIeC,QAAD,IAAc;AACxBC,QAAAA,WAAW,CACTD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAmBN,GAAD,KAAU;AAC1BhB,UAAAA,EAAE,EAAEgB,GAAG,CAAChB,EADkB;AAE1BuB,UAAAA,IAAI,EAAEP,GAAG,CAACO,IAAJ;AAFoB,SAAV,CAAlB,CADS,CAAX;AAMD,OAXH;AAYD;AACF,GAfM,EAeJ,EAfI,CAAT;AAiBA,sBACE;AACE,IAAA,SAAS,EAAG,WAAUd,IAAI,CAACH,KAAL,KAAeA,KAAf,IAAwB,iBAAkB,EADlE;AAEE,IAAA,GAAG,EAAEE,GAFP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAME,oBAAC,MAAD;AAAQ,IAAA,SAAS,EAAC,gBAAlB;AAAmC,IAAA,GAAG,EAAEH,KAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIE,OAAJ,CAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQT,MAAM,CAAC,IAAI0B,IAAJ,CAAStB,SAAT,aAASA,SAAT,uBAASA,SAAS,CAAEuB,MAAX,EAAT,CAAD,CAAN,CAAsCC,OAAtC,EAAR,CARF,CADF;AAYD,CArCuB,CAA1B;AAwCA,eAAe3B,OAAf","sourcesContent":["import { Avatar } from \"@material-ui/core\";\nimport React, { forwardRef, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { selectUser } from \"./features/userSlice\";\nimport \"./Message.css\";\nimport moment from \"moment\";\n\nconst Message = forwardRef(\n  (\n    { id, contents: { timestamp, displayName, uid, photo, email, message } },\n    ref\n  ) => {\n    const user = useSelector(selectUser);\n    const [messageInfo, serMessageInfo] = useState([]);\n\n    useEffect(() => {\n        if (chatId) {\n          db.collection(\"chats\")\n            .doc(chatId)\n            .collection(\"messages\")\n            .orderBy(\"timestamp\", \"desc\")\n            .onSnapshot((snapshot) => {\n              setMessages(\n                snapshot.docs.map((doc) => ({\n                  id: doc.id,\n                  data: doc.data(),\n                }))\n              );\n            });\n        }\n      }, []);\n\n    return (\n      <div\n        className={`message ${user.email === email && \"message__sender\"}`}\n        ref={ref}\n      >\n        {/* checks whether user email is equal to email that comes in\n     as props who inserted the message if so then sets classname to message__sender */}\n        <Avatar className=\"message__photo\" src={photo} />\n        <p>{message}</p>\n        <small>{moment(new Date(timestamp?.toDate())).fromNow()}</small>\n      </div>\n    );\n  }\n);\n\nexport default Message;\n"]},"metadata":{},"sourceType":"module"}