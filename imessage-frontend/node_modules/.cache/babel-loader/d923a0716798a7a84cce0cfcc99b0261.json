{"ast":null,"code":"import _slicedToArray from\"/Users/shoumikh/Documents/React-projects/imessage-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Avatar}from\"@material-ui/core\";import moment from\"moment\";import React,{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{setChat}from\"./features/chatSlice\";import db from\"./firebase\";import\"./SidebarChat.css\";import{selectChatId}from\"./features/chatSlice\";function SidebarChat(_ref){var _chatInfo$,_chatInfo$2,_chatInfo$3,_chatInfo$3$timestamp;var id=_ref.id,chatName=_ref.chatName;var dispatch=useDispatch();//for dispatching action into the data layer\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),chatInfo=_useState2[0],setChatInfo=_useState2[1];var chatId=useSelector(selectChatId);useEffect(function(){db.collection(\"chats\").doc(id).collection(\"messages\").orderBy(\"timestamp\",\"desc\").onSnapshot(function(snapshot){setChatInfo(snapshot.docs.map(function(doc){return doc.data();}));});},[id]);return/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){dispatch(setChat({chatId:id,chatName:chatName}));},className:\"sidebarChat \".concat(chatId===id&&\"sidebarChat__active\")},/*#__PURE__*/React.createElement(Avatar,{src:(_chatInfo$=chatInfo[0])===null||_chatInfo$===void 0?void 0:_chatInfo$.photo}),/*#__PURE__*/React.createElement(\"div\",{className:\"sidebarChat__info\"},/*#__PURE__*/React.createElement(\"h3\",null,chatName),/*#__PURE__*/React.createElement(\"p\",null,(_chatInfo$2=chatInfo[0])===null||_chatInfo$2===void 0?void 0:_chatInfo$2.message),/*#__PURE__*/React.createElement(\"small\",null,moment(new Date((_chatInfo$3=chatInfo[0])===null||_chatInfo$3===void 0?void 0:(_chatInfo$3$timestamp=_chatInfo$3.timestamp)===null||_chatInfo$3$timestamp===void 0?void 0:_chatInfo$3$timestamp.toDate())).fromNow())));}export default SidebarChat;","map":{"version":3,"sources":["/Users/shoumikh/Documents/React-projects/imessage-clone/src/SidebarChat.js"],"names":["Avatar","moment","React","useEffect","useState","useDispatch","useSelector","setChat","db","selectChatId","SidebarChat","id","chatName","dispatch","chatInfo","setChatInfo","chatId","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","photo","message","Date","timestamp","toDate","fromNow"],"mappings":"8KAAA,OAASA,MAAT,KAAuB,mBAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,OAAT,KAAwB,sBAAxB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,MAAO,mBAAP,CACA,OAASC,YAAT,KAA4B,sBAA5B,CAEA,QAASC,CAAAA,WAAT,MAAuC,iEAAhBC,CAAAA,EAAgB,MAAhBA,EAAgB,CAAZC,QAAY,MAAZA,QAAY,CACrC,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CAAgC;AADK,cAELD,QAAQ,CAAC,EAAD,CAFH,wCAE9BU,QAF8B,eAEpBC,WAFoB,eAGrC,GAAMC,CAAAA,MAAM,CAAGV,WAAW,CAACG,YAAD,CAA1B,CAEAN,SAAS,CAAC,UAAM,CACdK,EAAE,CAACS,UAAH,CAAc,OAAd,EACGC,GADH,CACOP,EADP,EAEGM,UAFH,CAEc,UAFd,EAGGE,OAHH,CAGW,WAHX,CAGwB,MAHxB,EAIGC,UAJH,CAIc,SAACC,QAAD,CAAc,CACxBN,WAAW,CAACM,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CAAX,CACD,CANH,EAOD,CARQ,CAQN,CAACb,EAAD,CARM,CAAT,CASA,mBACE,2BACE,OAAO,CAAE,kBAAM,CACbE,QAAQ,CACNN,OAAO,CAAC,CACNS,MAAM,CAAEL,EADF,CAENC,QAAQ,CAAEA,QAFJ,CAAD,CADD,CAAR,CAMD,CARH,CASE,SAAS,uBAAiBI,MAAM,GAAKL,EAAX,EAAiB,qBAAlC,CATX,eAWE,oBAAC,MAAD,EAAQ,GAAG,aAAEG,QAAQ,CAAC,CAAD,CAAV,qCAAE,WAAaW,KAA1B,EAXF,cAYE,2BAAK,SAAS,CAAC,mBAAf,eACE,8BAAKb,QAAL,CADF,cAEE,0CAAIE,QAAQ,CAAC,CAAD,CAAZ,sCAAI,YAAaY,OAAjB,CAFF,cAGE,iCACGzB,MAAM,CAAC,GAAI0B,CAAAA,IAAJ,cAASb,QAAQ,CAAC,CAAD,CAAjB,6DAAS,YAAac,SAAtB,gDAAS,sBAAwBC,MAAxB,EAAT,CAAD,CAAN,CAAmDC,OAAnD,EADH,CAHF,CAZF,CADF,CAsBD,CAED,cAAepB,CAAAA,WAAf","sourcesContent":["import { Avatar } from \"@material-ui/core\";\nimport moment from \"moment\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { setChat } from \"./features/chatSlice\";\nimport db from \"./firebase\";\nimport \"./SidebarChat.css\";\nimport { selectChatId} from \"./features/chatSlice\";\n\nfunction SidebarChat({ id, chatName }) {\n  const dispatch = useDispatch(); //for dispatching action into the data layer\n  const [chatInfo, setChatInfo] = useState([]);\n  const chatId = useSelector(selectChatId);\n\n  useEffect(() => {\n    db.collection(\"chats\")\n      .doc(id)\n      .collection(\"messages\")\n      .orderBy(\"timestamp\", \"desc\")\n      .onSnapshot((snapshot) => {\n        setChatInfo(snapshot.docs.map((doc) => doc.data()));\n      });\n  }, [id]);\n  return (\n    <div\n      onClick={() => {\n        dispatch(\n          setChat({\n            chatId: id,\n            chatName: chatName,\n          })\n        );\n      }}\n      className={`sidebarChat ${chatId === id && \"sidebarChat__active\"}`}\n    >\n      <Avatar src={chatInfo[0]?.photo} />\n      <div className=\"sidebarChat__info\">\n        <h3>{chatName}</h3>\n        <p>{chatInfo[0]?.message}</p>\n        <small>\n          {moment(new Date(chatInfo[0]?.timestamp?.toDate())).fromNow()}\n        </small>\n      </div>\n    </div>\n  );\n}\n\nexport default SidebarChat;\n"]},"metadata":{},"sourceType":"module"}